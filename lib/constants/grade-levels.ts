export const gradeLevels = [
  // ระบบไทย - อนุบาล
  { value: 'อนุบาล 1', label: 'อนุบาล 1', category: 'อนุบาล', searchTerms: ['อ1', 'อนุบาล1', 'อ.1', 'อนุบาลปีที่1', 'อนุบาลปีที่ 1'] },
  { value: 'อนุบาล 2', label: 'อนุบาล 2', category: 'อนุบาล', searchTerms: ['อ2', 'อนุบาล2', 'อ.2', 'อนุบาลปีที่2', 'อนุบาลปีที่ 2'] },
  { value: 'อนุบาล 3', label: 'อนุบาล 3', category: 'อนุบาล', searchTerms: ['อ3', 'อนุบาล3', 'อ.3', 'อนุบาลปีที่3', 'อนุบาลปีที่ 3'] },
  
  // ระบบไทย - ประถม
  { value: 'ป.1', label: 'ป.1', category: 'ประถมศึกษา', searchTerms: ['ป1', 'ประถม1', 'ประถมศึกษา1', 'ประถมศึกษาปีที่1', 'ประถมศึกษาปีที่ 1', 'ประถมปีที่1', 'ประถมปีที่ 1'] },
  { value: 'ป.2', label: 'ป.2', category: 'ประถมศึกษา', searchTerms: ['ป2', 'ประถม2', 'ประถมศึกษา2', 'ประถมศึกษาปีที่2', 'ประถมศึกษาปีที่ 2', 'ประถมปีที่2', 'ประถมปีที่ 2'] },
  { value: 'ป.3', label: 'ป.3', category: 'ประถมศึกษา', searchTerms: ['ป3', 'ประถม3', 'ประถมศึกษา3', 'ประถมศึกษาปีที่3', 'ประถมศึกษาปีที่ 3', 'ประถมปีที่3', 'ประถมปีที่ 3'] },
  { value: 'ป.4', label: 'ป.4', category: 'ประถมศึกษา', searchTerms: ['ป4', 'ประถม4', 'ประถมศึกษา4', 'ประถมศึกษาปีที่4', 'ประถมศึกษาปีที่ 4', 'ประถมปีที่4', 'ประถมปีที่ 4'] },
  { value: 'ป.5', label: 'ป.5', category: 'ประถมศึกษา', searchTerms: ['ป5', 'ประถม5', 'ประถมศึกษา5', 'ประถมศึกษาปีที่5', 'ประถมศึกษาปีที่ 5', 'ประถมปีที่5', 'ประถมปีที่ 5'] },
  { value: 'ป.6', label: 'ป.6', category: 'ประถมศึกษา', searchTerms: ['ป6', 'ประถม6', 'ประถมศึกษา6', 'ประถมศึกษาปีที่6', 'ประถมศึกษาปีที่ 6', 'ประถมปีที่6', 'ประถมปีที่ 6'] },
  
  // ระบบไทย - มัธยมต้น
  { value: 'ม.1', label: 'ม.1', category: 'มัธยมศึกษาตอนต้น', searchTerms: ['ม1', 'มัธยม1', 'มัธยมศึกษา1', 'มัธยมศึกษาปีที่1', 'มัธยมศึกษาปีที่ 1', 'มัธยมปีที่1', 'มัธยมปีที่ 1', 'มัธยมต้น1'] },
  { value: 'ม.2', label: 'ม.2', category: 'มัธยมศึกษาตอนต้น', searchTerms: ['ม2', 'มัธยม2', 'มัธยมศึกษา2', 'มัธยมศึกษาปีที่2', 'มัธยมศึกษาปีที่ 2', 'มัธยมปีที่2', 'มัธยมปีที่ 2', 'มัธยมต้น2'] },
  { value: 'ม.3', label: 'ม.3', category: 'มัธยมศึกษาตอนต้น', searchTerms: ['ม3', 'มัธยม3', 'มัธยมศึกษา3', 'มัธยมศึกษาปีที่3', 'มัธยมศึกษาปีที่ 3', 'มัธยมปีที่3', 'มัธยมปีที่ 3', 'มัธยมต้น3'] },
  
  // ระบบไทย - มัธยมปลาย
  { value: 'ม.4', label: 'ม.4', category: 'มัธยมศึกษาตอนปลาย', searchTerms: ['ม4', 'มัธยม4', 'มัธยมศึกษา4', 'มัธยมศึกษาปีที่4', 'มัธยมศึกษาปีที่ 4', 'มัธยมปีที่4', 'มัธยมปีที่ 4', 'มัธยมปลาย1'] },
  { value: 'ม.5', label: 'ม.5', category: 'มัธยมศึกษาตอนปลาย', searchTerms: ['ม5', 'มัธยม5', 'มัธยมศึกษา5', 'มัธยมศึกษาปีที่5', 'มัธยมศึกษาปีที่ 5', 'มัธยมปีที่5', 'มัธยมปีที่ 5', 'มัธยมปลาย2'] },
  { value: 'ม.6', label: 'ม.6', category: 'มัธยมศึกษาตอนปลาย', searchTerms: ['ม6', 'มัธยม6', 'มัธยมศึกษา6', 'มัธยมศึกษาปีที่6', 'มัธยมศึกษาปีที่ 6', 'มัธยมปีที่6', 'มัธยมปีที่ 6', 'มัธยมปลาย3'] },
  
  // International System - Early Years
  { value: 'Nursery', label: 'Nursery', category: 'International - Early Years', searchTerms: ['nur', 'nursery'] },
  { value: 'Pre-K', label: 'Pre-K', category: 'International - Early Years', searchTerms: ['prek', 'pre k', 'pre kindergarten'] },
  { value: 'Kindergarten', label: 'Kindergarten', category: 'International - Early Years', searchTerms: ['k', 'kg', 'kinder', 'kindergarten'] },
  
  // International System - Primary
  { value: 'Grade 1', label: 'Grade 1', category: 'International - Primary', searchTerms: ['g1', 'grade1', 'gr1', 'gr 1'] },
  { value: 'Grade 2', label: 'Grade 2', category: 'International - Primary', searchTerms: ['g2', 'grade2', 'gr2', 'gr 2'] },
  { value: 'Grade 3', label: 'Grade 3', category: 'International - Primary', searchTerms: ['g3', 'grade3', 'gr3', 'gr 3'] },
  { value: 'Grade 4', label: 'Grade 4', category: 'International - Primary', searchTerms: ['g4', 'grade4', 'gr4', 'gr 4'] },
  { value: 'Grade 5', label: 'Grade 5', category: 'International - Primary', searchTerms: ['g5', 'grade5', 'gr5', 'gr 5'] },
  { value: 'Grade 6', label: 'Grade 6', category: 'International - Primary', searchTerms: ['g6', 'grade6', 'gr6', 'gr 6'] },
  
  // International System - Secondary
  { value: 'Grade 7', label: 'Grade 7', category: 'International - Secondary', searchTerms: ['g7', 'grade7', 'gr7', 'gr 7'] },
  { value: 'Grade 8', label: 'Grade 8', category: 'International - Secondary', searchTerms: ['g8', 'grade8', 'gr8', 'gr 8'] },
  { value: 'Grade 9', label: 'Grade 9', category: 'International - Secondary', searchTerms: ['g9', 'grade9', 'gr9', 'gr 9'] },
  { value: 'Grade 10', label: 'Grade 10', category: 'International - Secondary', searchTerms: ['g10', 'grade10', 'gr10', 'gr 10'] },
  { value: 'Grade 11', label: 'Grade 11', category: 'International - Secondary', searchTerms: ['g11', 'grade11', 'gr11', 'gr 11'] },
  { value: 'Grade 12', label: 'Grade 12', category: 'International - Secondary', searchTerms: ['g12', 'grade12', 'gr12', 'gr 12'] },
  
  // British System - Primary
  { value: 'Year 1', label: 'Year 1', category: 'British - Primary', searchTerms: ['y1', 'year1', 'yr1', 'yr 1'] },
  { value: 'Year 2', label: 'Year 2', category: 'British - Primary', searchTerms: ['y2', 'year2', 'yr2', 'yr 2'] },
  { value: 'Year 3', label: 'Year 3', category: 'British - Primary', searchTerms: ['y3', 'year3', 'yr3', 'yr 3'] },
  { value: 'Year 4', label: 'Year 4', category: 'British - Primary', searchTerms: ['y4', 'year4', 'yr4', 'yr 4'] },
  { value: 'Year 5', label: 'Year 5', category: 'British - Primary', searchTerms: ['y5', 'year5', 'yr5', 'yr 5'] },
  { value: 'Year 6', label: 'Year 6', category: 'British - Primary', searchTerms: ['y6', 'year6', 'yr6', 'yr 6'] },
  
  // British System - Secondary
  { value: 'Year 7', label: 'Year 7', category: 'British - Secondary', searchTerms: ['y7', 'year7', 'yr7', 'yr 7'] },
  { value: 'Year 8', label: 'Year 8', category: 'British - Secondary', searchTerms: ['y8', 'year8', 'yr8', 'yr 8'] },
  { value: 'Year 9', label: 'Year 9', category: 'British - Secondary', searchTerms: ['y9', 'year9', 'yr9', 'yr 9'] },
  { value: 'Year 10', label: 'Year 10', category: 'British - Secondary', searchTerms: ['y10', 'year10', 'yr10', 'yr 10'] },
  { value: 'Year 11', label: 'Year 11', category: 'British - Secondary', searchTerms: ['y11', 'year11', 'yr11', 'yr 11'] },
  { value: 'Year 12', label: 'Year 12', category: 'British - Sixth Form', searchTerms: ['y12', 'year12', 'yr12', 'yr 12'] },
  { value: 'Year 13', label: 'Year 13', category: 'British - Sixth Form', searchTerms: ['y13', 'year13', 'yr13', 'yr 13'] },
  
  // อื่นๆ
  { value: 'Pre-school', label: 'Pre-school', category: 'อื่นๆ', searchTerms: ['preschool', 'pre school'] },
  { value: 'Homeschool', label: 'Homeschool', category: 'อื่นๆ', searchTerms: ['home school', 'โฮมสคูล'] },
];

// Helper function สำหรับ normalize text (ลบช่องว่างและทำให้เป็นตัวพิมพ์เล็ก)
export function normalizeText(text: string): string {
  return text.toLowerCase().replace(/\s+/g, '').replace(/\./g, '');
}

// Function สำหรับค้นหาระดับชั้นที่ match กับคำค้นหา
export function searchGradeLevels(searchTerm: string): typeof gradeLevels {
  if (!searchTerm || searchTerm.length < 1) return [];
  
  const normalizedSearch = normalizeText(searchTerm);
  
  return gradeLevels.filter(grade => {
    // ค้นหาจาก value
    if (normalizeText(grade.value).includes(normalizedSearch)) return true;
    
    // ค้นหาจาก label
    if (normalizeText(grade.label).includes(normalizedSearch)) return true;
    
    // ค้นหาจาก searchTerms
    if (grade.searchTerms) {
      return grade.searchTerms.some(term => 
        normalizeText(term).includes(normalizedSearch)
      );
    }
    
    // ค้นหาจาก category
    if (normalizeText(grade.category).includes(normalizedSearch)) return true;
    
    return false;
  });
}

// Function สำหรับแสดงชื่อระดับชั้นแบบเต็ม (สำหรับ display)
export function getGradeLevelFullName(value: string): string {
  const gradeMap: Record<string, string> = {
    // อนุบาล
    'อนุบาล 1': 'อนุบาลปีที่ 1',
    'อนุบาล 2': 'อนุบาลปีที่ 2',
    'อนุบาล 3': 'อนุบาลปีที่ 3',
    
    // ประถม
    'ป.1': 'ประถมศึกษาปีที่ 1',
    'ป.2': 'ประถมศึกษาปีที่ 2',
    'ป.3': 'ประถมศึกษาปีที่ 3',
    'ป.4': 'ประถมศึกษาปีที่ 4',
    'ป.5': 'ประถมศึกษาปีที่ 5',
    'ป.6': 'ประถมศึกษาปีที่ 6',
    
    // มัธยม
    'ม.1': 'มัธยมศึกษาปีที่ 1',
    'ม.2': 'มัธยมศึกษาปีที่ 2',
    'ม.3': 'มัธยมศึกษาปีที่ 3',
    'ม.4': 'มัธยมศึกษาปีที่ 4',
    'ม.5': 'มัธยมศึกษาปีที่ 5',
    'ม.6': 'มัธยมศึกษาปีที่ 6',
  };
  
  return gradeMap[value] || value;
}

// Function สำหรับ normalize ระดับชั้น (แปลงรูปแบบต่างๆ เป็นรูปแบบมาตรฐาน)
export function normalizeGradeLevel(input: string): string {
  const normalized = normalizeText(input);
  
  // Map ทุกรูปแบบเป็นรูปแบบมาตรฐาน
  const gradeMap: Record<string, string> = {
    // อนุบาล
    'อ1': 'อนุบาล 1',
    'อนุบาล1': 'อนุบาล 1',
    'อนุบาลปีที่1': 'อนุบาล 1',
    'อนุบาลปีที่ 1': 'อนุบาล 1',
    
    // ประถม - ทุกรูปแบบแปลงเป็น ป.X
    'ป1': 'ป.1',
    'ประถม1': 'ป.1',
    'ประถมศึกษา1': 'ป.1',
    'ประถมศึกษาปีที่1': 'ป.1',
    'ประถมศึกษาปีที่ 1': 'ป.1',
    'ประถมปีที่1': 'ป.1',
    'ประถมปีที่ 1': 'ป.1',
    
    // มัธยม - ทุกรูปแบบแปลงเป็น ม.X
    'ม1': 'ม.1',
    'มัธยม1': 'ม.1',
    'มัธยมศึกษา1': 'ม.1',
    'มัธยมศึกษาปีที่1': 'ม.1',
    'มัธยมศึกษาปีที่ 1': 'ม.1',
    'มัธยมปีที่1': 'ม.1',
    'มัธยมปีที่ 1': 'ม.1',
    'มัธยมต้น1': 'ม.1',
    
    // International
    'g1': 'Grade 1',
    'grade1': 'Grade 1',
    'gr1': 'Grade 1',
    
    // British
    'y1': 'Year 1',
    'year1': 'Year 1',
    'yr1': 'Year 1',
  };
  
  // ค้นหาจาก normalized input
  for (const [key, value] of Object.entries(gradeMap)) {
    if (normalizeText(key) === normalized) {
      return value;
    }
  }
  
  // ค้นหาจาก grade levels ที่มีอยู่
  const found = gradeLevels.find(grade => 
    normalizeText(grade.value) === normalized ||
    normalizeText(grade.label) === normalized ||
    grade.searchTerms?.some(term => normalizeText(term) === normalized)
  );
  
  if (found) {
    return found.value;
  }
  
  // ถ้าไม่เจอ return ค่าเดิม
  return input;
}